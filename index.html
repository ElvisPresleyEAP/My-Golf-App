<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Scorecard by Kamal</title>
    <!-- Updated for GitHub Pages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            // Initial data for holes
            const initialHoles = [
                { no: 1, par: 4, index: 16 }, { no: 2, par: 3, index: 10 }, { no: 3, par: 4, index: 4 },
                { no: 4, par: 4, index: 6 }, { no: 5, par: 4, index: 14 }, { no: 6, par: 4, index: 2 },
                { no: 7, par: 5, index: 8 }, { no: 8, par: 3, index: 12 }, { no: 9, par: 4, index: 18 },
                { no: 10, par: 4, index: 5 }, { no: 11, par: 4, index: 7 }, { no: 12, par: 5, index: 17 },
                { no: 13, par: 4, index: 1 }, { no: 14, par: 3, index: 13 }, { no: 15, par: 4, index: 9 },
                { no: 16, par: 5, index: 15 }, { no: 17, par: 3, index: 11 }, { no: 18, par: 4, index: 3 }
            ];

            // Load saved data from localStorage
            const loadSavedData = () => {
                try {
                    const savedData = localStorage.getItem('golfScorecardData');
                    if (savedData) {
                        return JSON.parse(savedData);
                    }
                } catch (error) {
                    console.log('Error loading saved data:', error);
                }
                return null;
            };

            const savedData = loadSavedData();
            
            // State variables with saved data or defaults
            const [clubName, setClubName] = useState(savedData?.clubName || 'Letchworth Golf Club');
            const [players, setPlayers] = useState(savedData?.players || ['Player 1', 'Player 2', 'Player 3', 'Player 4']);
            const [playerHandicaps, setPlayerHandicaps] = useState(savedData?.playerHandicaps || [0, 0, 0, 0]);
            const [scores, setScores] = useState(savedData?.scores || Array(18).fill(null).map(() => Array(4).fill('')));
            const [points, setPoints] = useState(Array(18).fill(null).map(() => Array(4).fill('')));
            const [activeTab, setActiveTab] = useState('scorecard');

            const scorecardTitle = 'Golf Scorecard by Kamal';

            // Calculate totals
            const playerGrossTotals = players.map((_, playerIndex) =>
                scores.reduce((acc, holeScores) => {
                    const score = holeScores[playerIndex];
                    return acc + (parseInt(score, 10) || 0);
                }, 0)
            );

            const playerPointTotals = players.map((_, playerIndex) =>
                points.reduce((acc, holePoints) => acc + (holePoints[playerIndex] || 0), 0)
            );

            const playerCountbackPointTotals = players.map((_, playerIndex) =>
                points.slice(12, 18).reduce((acc, holePoints) => acc + (holePoints[playerIndex] || 0), 0)
            );

            // Par totals
            const totalPar = initialHoles.reduce((acc, hole) => acc + hole.par, 0);
            const front9Par = initialHoles.slice(0, 9).reduce((acc, hole) => acc + hole.par, 0);
            const back9Par = initialHoles.slice(9, 18).reduce((acc, hole) => acc + hole.par, 0);

            // Calculate points when scores change
            useEffect(() => {
                const newPoints = initialHoles.map((hole, holeIndex) => {
                    return players.map((_, playerIndex) => {
                        const grossScore = scores[holeIndex][playerIndex];
                        const handicap = playerHandicaps[playerIndex] || 0;
                        const index = hole.index;
                        
                        if (grossScore === '') return '';
                        
                        const numericGrossScore = parseInt(grossScore, 10);
                        let strokes = 0;
                        
                        if (handicap > 0) {
                            strokes = Math.floor(handicap / 18) + (index <= (handicap % 18) ? 1 : 0);
                        }
                        
                        const nettStrokes = numericGrossScore - strokes;
                        const diff = nettStrokes - hole.par;
                        
                        let pts = 0;
                        if (diff <= -2) pts = 4;
                        else if (diff === -1) pts = 3;
                        else if (diff === 0) pts = 2;
                        else if (diff === 1) pts = 1;
                        else pts = 0;
                        
                        return pts;
                    });
                });
                setPoints(newPoints);
            }, [scores, players, playerHandicaps]);

            // Save data to localStorage whenever key data changes
            useEffect(() => {
                const dataToSave = {
                    clubName,
                    players,
                    playerHandicaps,
                    scores
                };
                
                try {
                    localStorage.setItem('golfScorecardData', JSON.stringify(dataToSave));
                } catch (error) {
                    console.log('Error saving data:', error);
                }
            }, [clubName, players, playerHandicaps, scores]);

            // Event handlers
            const handlePlayerNameChange = (event, playerIndex) => {
                const newPlayers = [...players];
                newPlayers[playerIndex] = event.target.value;
                setPlayers(newPlayers);
            };

            const handleHandicapChange = (event, playerIndex) => {
                const handicap = parseInt(event.target.value, 10);
                const newHandicaps = [...playerHandicaps];
                newHandicaps[playerIndex] = isNaN(handicap) ? 0 : handicap;
                setPlayerHandicaps(newHandicaps);
            };

            const handleScoreChange = (event, holeIndex, playerIndex) => {
                const score = event.target.value;
                const newScores = [...scores];
                newScores[holeIndex][playerIndex] = score;
                setScores(newScores);
            };

            const handleAddPlayer = () => {
                if (players.length >= 30) {
                    alert('Maximum of 30 players allowed');
                    return;
                }
                
                const newPlayers = [...players, `Player ${players.length + 1}`];
                setPlayers(newPlayers);
                
                const newHandicaps = [...playerHandicaps, 0];
                setPlayerHandicaps(newHandicaps);
                
                const newScores = scores.map(holeScores => [...holeScores, '']);
                setScores(newScores);
            };

            const handleRemovePlayer = (playerIndex) => {
                if (players.length <= 2) {
                    alert('Minimum of 2 players required');
                    return;
                }
                
                if (confirm(`Remove ${players[playerIndex]} from the scorecard?`)) {
                    const newPlayers = players.filter((_, index) => index !== playerIndex);
                    setPlayers(newPlayers);
                    
                    const newHandicaps = playerHandicaps.filter((_, index) => index !== playerIndex);
                    setPlayerHandicaps(newHandicaps);
                    
                    const newScores = scores.map(holeScores => 
                        holeScores.filter((_, index) => index !== playerIndex)
                    );
                    setScores(newScores);
                }
            };

            const resetScores = () => {
                if (confirm('Are you sure you want to reset all scores? This will clear all scores but keep player names and handicaps. This action cannot be undone.')) {
                    setScores(Array(18).fill(null).map(() => Array(players.length).fill('')));
                    setPoints(Array(18).fill(null).map(() => Array(players.length).fill('')));
                }
            };

            const clearAllData = () => {
                if (confirm('Are you sure you want to clear ALL data? This will reset everything including player names, handicaps, and scores. This action cannot be undone.')) {
                    // Reset to default values
                    setClubName('Letchworth Golf Club');
                    setPlayers(['Player 1', 'Player 2', 'Player 3', 'Player 4']);
                    setPlayerHandicaps([0, 0, 0, 0]);
                    setScores(Array(18).fill(null).map(() => Array(4).fill('')));
                    setPoints(Array(18).fill(null).map(() => Array(4).fill('')));
                    
                    // Clear localStorage
                    try {
                        localStorage.removeItem('golfScorecardData');
                    } catch (error) {
                        console.log('Error clearing saved data:', error);
                    }
                }
            };

            const shareViaWhatsApp = () => {
                let message = `${scorecardTitle}%0A${clubName}%0A%0A`;
                message += `📋 Final Scores:%0A`;
                
                players.forEach((player, index) => {
                    const totalGross = playerGrossTotals[index] || 0;
                    const totalPoints = playerPointTotals[index] || 0;
                    const handicap = playerHandicaps[index] || 0;
                    message += `${player} (HC: ${handicap}): ${totalGross} gross, ${totalPoints} points%0A`;
                });
                
                message += `%0ATotal Par: ${totalPar}%0A%0A⛳ Powered by Golf Scorecard by Kamal`;
                
                const whatsappUrl = `https://wa.me/?text=${message}`;
                window.open(whatsappUrl, '_blank');
            };

            const emailScorecard = () => {
                let emailBody = `${scorecardTitle}\n${clubName}\n\n`;
                emailBody += `📋 Final Scores:\n`;
                
                players.forEach((player, index) => {
                    const totalGross = playerGrossTotals[index] || 0;
                    const totalPoints = playerPointTotals[index] || 0;
                    const handicap = playerHandicaps[index] || 0;
                    emailBody += `${player} (HC: ${handicap}): ${totalGross} gross, ${totalPoints} points\n`;
                });
                
                emailBody += `\nTotal Par: ${totalPar}\n\n⛳ Powered by Golf Scorecard by Kamal`;
                
                const subject = encodeURIComponent(`Golf Scorecard - ${clubName}`);
                const body = encodeURIComponent(emailBody);
                const mailtoLink = `mailto:?subject=${subject}&body=${body}`;
                
                // Try to open email client
                try {
                    window.open(mailtoLink, '_self');
                } catch (error) {
                    // Fallback: copy to clipboard
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(emailBody.replace(/\\n/g, '\n'))
                            .then(() => {
                                alert('Scorecard copied to clipboard! You can now paste it into an email.');
                            })
                            .catch(() => {
                                downloadScorecard(emailBody.replace(/\\n/g, '\n'));
                            });
                    } else {
                        downloadScorecard(emailBody.replace(/\\n/g, '\n'));
                    }
                }
            };

            const downloadScorecard = (content) => {
                const blob = new Blob([content], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${clubName.replace(/\s+/g, '_')}_scorecard.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                alert('Scorecard downloaded as text file!');
            };

            return (
                <div className="min-h-screen bg-gray-100 p-4 md:p-8 font-sans antialiased text-gray-800">
                    <div className="max-w-7xl mx-auto mb-6">
                        <h1 className="w-full text-3xl md:text-4xl font-extrabold text-center text-teal-700 mb-2">
                            {scorecardTitle}
                        </h1>
                        <input
                            type="text"
                            value={clubName}
                            onChange={(e) => setClubName(e.target.value)}
                            className="w-full text-xl text-center font-semibold text-gray-600 bg-transparent border-b-2 border-transparent focus:outline-none focus:border-gray-400 mb-2"
                        />
                        <p className="text-center text-gray-500">Gross scores + Stableford Points</p>
                        <p className="text-center text-green-600 text-xs mt-1">✓ Scores automatically saved</p>
                        
                        <div className="text-center mt-4">
                            <button
                                onClick={handleAddPlayer}
                                className="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 mr-2"
                                disabled={players.length >= 30}
                            >
                                + Add Player ({players.length}/30)
                            </button>
                        </div>
                        
                        {/* Tab Navigation */}
                        <div className="flex justify-center mt-6 border-b">
                            <button
                                onClick={() => setActiveTab('scorecard')}
                                className={`py-2 px-6 font-semibold border-b-2 transition-colors duration-300 ${
                                    activeTab === 'scorecard'
                                        ? 'border-teal-500 text-teal-600'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`}
                            >
                                📋 Scorecard
                            </button>
                            <button
                                onClick={() => setActiveTab('leaderboard')}
                                className={`py-2 px-6 font-semibold border-b-2 transition-colors duration-300 ${
                                    activeTab === 'leaderboard'
                                        ? 'border-teal-500 text-teal-600'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`}
                            >
                                🏆 Leaderboard
                            </button>
                        </div>
                    </div>

                    {/* Scorecard Tab Content */}
                    {activeTab === 'scorecard' && (
                        <div className="max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-x-auto">
                            <table className="w-full text-left border-collapse">
                                <thead className="bg-teal-600 text-white sticky top-0">
                                    <tr className="text-sm uppercase font-semibold">
                                        <th rowSpan="2" className="py-3 px-2 md:px-4 text-center">Hole</th>
                                        <th rowSpan="2" className="py-3 px-2 md:px-4 text-center">Par</th>
                                        <th rowSpan="2" className="py-3 px-2 md:px-4 text-center">Index</th>
                                        {players.map((_, index) => (
                                            <th key={index} colSpan="2" className="py-3 px-2 md:px-4 text-center relative">
                                                <input
                                                    type="text"
                                                    value={players[index]}
                                                    onChange={(e) => handlePlayerNameChange(e, index)}
                                                    className="w-full text-center bg-transparent border-b-2 border-white focus:outline-none focus:border-teal-200 pr-6"
                                                />
                                                {players.length > 2 && (
                                                    <button
                                                        onClick={() => handleRemovePlayer(index)}
                                                        className="absolute right-1 top-2 text-red-200 hover:text-red-100 font-bold text-sm"
                                                        title="Remove player"
                                                    >
                                                        ×
                                                    </button>
                                                )}
                                            </th>
                                        ))}
                                    </tr>
                                    <tr>
                                        {players.map((_, index) => (
                                            <React.Fragment key={index}>
                                                <th className="py-3 px-2 md:px-4 text-center">Gross</th>
                                                <th className="py-3 px-2 md:px-4 text-center">Points</th>
                                            </React.Fragment>
                                        ))}
                                    </tr>
                                    <tr className="bg-teal-700 text-white text-xs">
                                        <th colSpan="3" className="py-1 px-2 md:px-4 text-center">Handicap (PHC)</th>
                                        {playerHandicaps.slice(0, players.length).map((handicap, index) => (
                                            <th key={index} colSpan="2" className="py-1 px-2 md:px-4">
                                                <input
                                                    type="number"
                                                    min="0"
                                                    value={handicap}
                                                    onChange={(e) => handleHandicapChange(e, index)}
                                                    className="w-full text-center bg-transparent border-b-2 border-white focus:outline-none focus:border-teal-200"
                                                />
                                            </th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody>
                                    {/* Front 9 holes */}
                                    {initialHoles.slice(0, 9).map((hole, holeIndex) => (
                                        <tr key={hole.no} className="border-t border-gray-200 hover:bg-gray-50">
                                            <td className="py-2 px-2 md:px-4 text-center font-medium">{hole.no}</td>
                                            <td className="py-2 px-2 md:px-4 text-center">{hole.par}</td>
                                            <td className="py-2 px-2 md:px-4 text-center">{hole.index}</td>
                                            {players.map((_, playerIndex) => (
                                                <React.Fragment key={playerIndex}>
                                                    <td className="py-2 px-2 md:px-4">
                                                        <input
                                                            type="number"
                                                            min="1"
                                                            value={scores[holeIndex][playerIndex]}
                                                            onChange={(e) => handleScoreChange(e, holeIndex, playerIndex)}
                                                            className="w-full p-2 text-center border rounded-md"
                                                        />
                                                    </td>
                                                    <td className="py-2 px-2 md:px-4 text-center font-bold">
                                                        {points[holeIndex] && points[holeIndex][playerIndex] !== undefined ? points[holeIndex][playerIndex] : ''}
                                                    </td>
                                                </React.Fragment>
                                            ))}
                                        </tr>
                                    ))}
                                    
                                    {/* Front 9 total */}
                                    <tr className="bg-blue-50 border-t-2 border-blue-400 font-bold">
                                        <td colSpan="2" className="py-2 px-2 md:px-4 text-center text-blue-700">Out (Front 9)</td>
                                        <td className="py-2 px-2 md:px-4 text-center text-blue-700">{front9Par}</td>
                                        {players.map((_, playerIndex) => {
                                            const front9Gross = scores.slice(0, 9).reduce((acc, holeScores) => {
                                                const score = holeScores[playerIndex];
                                                return acc + (parseInt(score, 10) || 0);
                                            }, 0);
                                            const front9Points = points.slice(0, 9).reduce((acc, holePoints) => {
                                                const point = holePoints && holePoints[playerIndex];
                                                return acc + (point || 0);
                                            }, 0);
                                            return (
                                                <React.Fragment key={playerIndex}>
                                                    <td className="py-2 px-2 md:px-4 text-center text-blue-700">{front9Gross || ''}</td>
                                                    <td className="py-2 px-2 md:px-4 text-center text-blue-700">{front9Points || ''}</td>
                                                </React.Fragment>
                                            );
                                        })}
                                    </tr>

                                    {/* Back 9 holes */}
                                    {initialHoles.slice(9, 18).map((hole, holeIndex) => {
                                        const actualIndex = holeIndex + 9;
                                        return (
                                            <tr key={hole.no} className="border-t border-gray-200 hover:bg-gray-50">
                                                <td className="py-2 px-2 md:px-4 text-center font-medium">{hole.no}</td>
                                                <td className="py-2 px-2 md:px-4 text-center">{hole.par}</td>
                                                <td className="py-2 px-2 md:px-4 text-center">{hole.index}</td>
                                                {players.map((_, playerIndex) => (
                                                    <React.Fragment key={playerIndex}>
                                                        <td className="py-2 px-2 md:px-4">
                                                            <input
                                                                type="number"
                                                                min="1"
                                                                value={scores[actualIndex][playerIndex]}
                                                                onChange={(e) => handleScoreChange(e, actualIndex, playerIndex)}
                                                                className="w-full p-2 text-center border rounded-md"
                                                            />
                                                        </td>
                                                        <td className="py-2 px-2 md:px-4 text-center font-bold">
                                                            {points[actualIndex] && points[actualIndex][playerIndex] !== undefined ? points[actualIndex][playerIndex] : ''}
                                                        </td>
                                                    </React.Fragment>
                                                ))}
                                            </tr>
                                        );
                                    })}
                                    
                                    {/* Back 9 total */}
                                    <tr className="bg-green-50 border-t-2 border-green-400 font-bold">
                                        <td colSpan="2" className="py-2 px-2 md:px-4 text-center text-green-700">In (Back 9)</td>
                                        <td className="py-2 px-2 md:px-4 text-center text-green-700">{back9Par}</td>
                                        {players.map((_, playerIndex) => {
                                            const back9Gross = scores.slice(9, 18).reduce((acc, holeScores) => {
                                                const score = holeScores[playerIndex];
                                                return acc + (parseInt(score, 10) || 0);
                                            }, 0);
                                            const back9Points = points.slice(9, 18).reduce((acc, holePoints) => {
                                                const point = holePoints && holePoints[playerIndex];
                                                return acc + (point || 0);
                                            }, 0);
                                            return (
                                                <React.Fragment key={playerIndex}>
                                                    <td className="py-2 px-2 md:px-4 text-center text-green-700">{back9Gross || ''}</td>
                                                    <td className="py-2 px-2 md:px-4 text-center text-green-700">{back9Points || ''}</td>
                                                </React.Fragment>
                                            );
                                        })}
                                    </tr>
                                    
                                    {/* Countback row */}
                                    <tr className="bg-gray-200 border-t-2 border-gray-400 font-bold">
                                        <td colSpan="3" className="py-2 px-2 md:px-4 text-center text-gray-700">Countback (Holes 13-18)</td>
                                        {players.map((_, playerIndex) => (
                                            <React.Fragment key={playerIndex}>
                                                <td className="py-2 px-2 md:px-4 text-center"></td>
                                                <td className="py-2 px-2 md:px-4 text-center text-gray-700">{playerCountbackPointTotals[playerIndex] || ''}</td>
                                            </React.Fragment>
                                        ))}
                                    </tr>
                                    
                                    {/* Total row */}
                                    <tr className="bg-teal-50 border-t-2 border-teal-600 font-bold">
                                        <td colSpan="2" className="py-3 px-2 md:px-4 text-center">Total</td>
                                        <td className="py-3 px-2 md:px-4 text-center">{totalPar}</td>
                                        {playerGrossTotals.slice(0, players.length).map((total, index) => (
                                            <React.Fragment key={index}>
                                                <td className="py-3 px-2 md:px-4 text-center text-teal-800">{total}</td>
                                                <td className="py-3 px-2 md:px-4 text-center"></td>
                                            </React.Fragment>
                                        ))}
                                    </tr>
                                    <tr className="bg-teal-50 border-t border-gray-200 font-bold">
                                        <td colSpan="3" className="py-3 px-2 md:px-4 text-center text-sm">Total Points</td>
                                        {playerPointTotals.slice(0, players.length).map((total, index) => (
                                            <React.Fragment key={index}>
                                                <td className="py-3 px-2 md:px-4 text-center"></td>
                                                <td className="py-3 px-2 md:px-4 text-center text-teal-800">{total}</td>
                                            </React.Fragment>
                                        ))}
                                    </tr>
                                </tbody>
                            </table>
                            
                            {/* Action Buttons - Scorecard Tab Only */}
                            <div className="bg-gray-50 px-6 py-4 border-t">
                                <div className="flex flex-wrap justify-center gap-3 mb-4">
                                    <button
                                        onClick={resetScores}
                                        className="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center gap-2"
                                    >
                                        🔄 Reset Scores
                                    </button>
                                    <button
                                        onClick={clearAllData}
                                        className="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center gap-2"
                                    >
                                        🗑️ Clear All Data
                                    </button>
                                </div>
                                <div className="flex flex-wrap justify-center gap-3">
                                    <button
                                        onClick={emailScorecard}
                                        className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center gap-2"
                                    >
                                        📧 Email Scorecard
                                    </button>
                                    <button
                                        onClick={shareViaWhatsApp}
                                        className="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center gap-2"
                                    >
                                        💬 Share via WhatsApp
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Leaderboard Tab Content */}
                    {activeTab === 'leaderboard' && (
                        <div className="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
                            <div className="bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 p-6">
                                <h2 className="text-2xl font-bold text-center text-white mb-2">
                                    🏆 Final Leaderboard
                                </h2>
                                <p className="text-center text-yellow-100 text-sm">
                                    Ranked by Total Stableford Points (Highest First)
                                </p>
                            </div>
                            
                            <div className="p-6">
                                {players
                                    .map((player, index) => ({
                                        name: player,
                                        playerIndex: index,
                                        totalPoints: playerPointTotals[index] || 0,
                                        totalGross: playerGrossTotals[index] || 0,
                                        handicap: playerHandicaps[index] || 0,
                                        countbackPoints: playerCountbackPointTotals[index] || 0,
                                        front9Points: points.slice(0, 9).reduce((acc, holePoints) => {
                                            const point = holePoints && holePoints[index];
                                            return acc + (point || 0);
                                        }, 0),
                                        back9Points: points.slice(9, 18).reduce((acc, holePoints) => {
                                            const point = holePoints && holePoints[index];
                                            return acc + (point || 0);
                                        }, 0)
                                    }))
                                    .sort((a, b) => {
                                        if (b.totalPoints !== a.totalPoints) {
                                            return b.totalPoints - a.totalPoints;
                                        }
                                        if (b.countbackPoints !== a.countbackPoints) {
                                            return b.countbackPoints - a.countbackPoints;
                                        }
                                        return a.totalGross - b.totalGross;
                                    })
                                    .map((playerData, position) => {
                                        const isWinner = position === 0;
                                        const isRunner = position === 1;
                                        const isThird = position === 2;
                                        
                                        return (
                                            <div 
                                                key={playerData.playerIndex} 
                                                className={`mb-4 p-4 rounded-lg border-2 transition-all duration-300 hover:shadow-md ${
                                                    isWinner 
                                                        ? 'bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-400 shadow-lg'
                                                        : isRunner
                                                        ? 'bg-gradient-to-r from-gray-50 to-gray-100 border-gray-400'
                                                        : isThird
                                                        ? 'bg-gradient-to-r from-orange-50 to-orange-100 border-orange-400'
                                                        : 'bg-gray-50 border-gray-200'
                                                }`}
                                            >
                                                <div className="flex items-center justify-between">
                                                    <div className="flex items-center space-x-4">
                                                        <div className={`text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center ${
                                                            isWinner 
                                                                ? 'bg-yellow-400 text-yellow-800'
                                                                : isRunner
                                                                ? 'bg-gray-400 text-gray-800'
                                                                : isThird
                                                                ? 'bg-orange-400 text-orange-800'
                                                                : 'bg-gray-300 text-gray-700'
                                                        }`}>
                                                            {isWinner ? '🥇' : isRunner ? '🥈' : isThird ? '🥉' : position + 1}
                                                        </div>
                                                        <div>
                                                            <h3 className={`text-lg font-bold ${
                                                                isWinner ? 'text-yellow-800' : 'text-gray-800'
                                                            }`}>
                                                                {playerData.name}
                                                                {isWinner && ' 🏆'}
                                                            </h3>
                                                            <p className="text-sm text-gray-600">
                                                                Handicap: {playerData.handicap}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-right">
                                                        <div className={`text-2xl font-bold ${
                                                            isWinner ? 'text-yellow-600' : 'text-gray-700'
                                                        }`}>
                                                            {playerData.totalPoints} pts
                                                        </div>
                                                        <div className="text-sm text-gray-500">
                                                            Points: {playerData.totalPoints}
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="mt-3 pt-3 border-t border-gray-200">
                                                    <div className="grid grid-cols-3 gap-4 text-sm">
                                                        <div className="text-center">
                                                            <span className="block text-blue-600 font-semibold">
                                                                {playerData.front9Points} pts
                                                            </span>
                                                            <span className="text-gray-500">Front 9</span>
                                                        </div>
                                                        <div className="text-center">
                                                            <span className="block text-green-600 font-semibold">
                                                                {playerData.back9Points} pts
                                                            </span>
                                                            <span className="text-gray-500">Back 9</span>
                                                        </div>
                                                        <div className="text-center">
                                                            <span className="block text-purple-600 font-semibold">
                                                                {playerData.countbackPoints} pts
                                                            </span>
                                                            <span className="text-gray-500">Countback</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })}
                            </div>
                            
                            <div className="bg-gray-50 px-6 py-4 border-t">
                                <p className="text-center text-gray-600 text-sm">
                                    ℹ️ Tiebreaker Order: 1) Total Points 2) Countback Points (Holes 13-18) 3) Lowest Gross Score
                                </p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
